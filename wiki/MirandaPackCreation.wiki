#labels miranda,pack,manual
Зачем может быть нужна собственная сборка Миранды? У каждого - свои причины. Самая частая - Вы захотели поделиться своей Мирандой (со всеми своими настройками и скинами) с Вашим другом/подругой.

Как упростить создание своей сборки? 

==Удаление персональных настроек==
Прежде всего, из Вашей сборки Миранды необходимо удалить персональные настройки - имена пользователей, пароли, контакты.

Конечно, можно все настройки каждый раз удалять вручную с помощью плагина [http://addons.miranda-im.org/details.php?action=viewfile&id=2957 Database Editor].

Но намного проще для этих целей воспользоваться плагином [http://forums.miranda-im.org/showthread.php?5451-Remove-Personal-Settings-Plugin Remove Personal Settings]. Его почему-то не так просто найти, и на официальном сайте Миранды его тоже нет, потому скачиваем его [http://www.miranda-addons.com/34_Remove_Personal_Settings/ тут].

Настройки плагина задаются в файле _!RemovePersonalSettings.ini_. В нем следует обратить внимание на следующие секции:
    * _{{{[RemoveSettings]}}}_ - здесь необходимо перечислить те настройки, которые нужно удалять. Я, например, добавил сюда записи по удалению имени и пароля пользователя:
    {{{
    VKontakte/UserEmail
    VKontakte/UserPass
    }}}
    * _{{{[RemoveFilesOrFolders]}}}_ - тут указываются папки, которые удаляет плагин. Я добавил сюда записи для удаления папок с аватарами и логами:
    {{{
    Profiles\VK\AvatarCache\VKontakte
    Profiles\VK\Logs\
    }}}
Обязательно создайте резервную копию файл профайла перед запуском данного плагина! 
Если какой-либо плагин при удалении контактов из списка Миранды удаляет их и с сервера - будьте особенно осторожны. Мой протокольный плагин ВКонтакте, если не выставлена соответствующая настройка, удаляет друзей и с сайта. 

==Тестирование сборки==
После работы плагина Remove Personal Settings, изменив что-нибудь в своей сборке, Вам будет необходимо заново ввести как минимум свои имена пользователей и пароли. Если сборки собирать часто - это скоро надоест.
Дабы упростить эту задачу, воспользуемся стандартными средствами Миранды - файлами _[http://code.google.com/p/miranda/source/browse/branches/stable/miranda/docs/autoexec_sample.ini autoexec_*.ini]_ и _[http://code.google.com/p/miranda/source/browse/branches/stable/miranda/docs/mirandaboot.ini mirandaboot.ini]_.

Для начала нужно настроить _mirandaboot.ini_:
    {{{
    [AutoExec]
    ; ставим yes, чтобы файлы autoexec_*.ini использовались при старте
    Use=yes
    ; тут нужно перечислить те плагины, настройки которых Миранда будет воспринимать
    ; без дополнительного запроса - перечисляем все плагины, которые нам нужны
    ; дабы упростить тестирование
    Safe=Netlib
    ; ставим значение leave, чтоб наши autoexec_*.ini файлы не удалялись при каждом
    ; старте Миранды
    OnCompletion=leave
    }}}
Ну и теперь сам файл _{{{autoexec_*.ini}}}_. Записываем в него те значение, которые мы хотим загружать в базу данных миранды при каждом старте. Очень удобно создавать их путем экспорта существующих значений из базы с помощью плагина [http://addons.miranda-im.org/details.php?action=viewfile&id=2957 Database Editor]. 
Пример моего _autoexec_la.ini_:
    {{{
    ; включает опцию логирования в файл 
    ; в плагине Netlib
    [Netlib]
    ; первый символ значения - тип значения
    ; u - unicode, b - byte и т.п.
    File=u%miranda_logpath%\netlog.txt
    ToFile=b1
    ; добавляет мои имя пользователя и пароль
    [VKontakte]
    UserEmail=smymail@gmail.com
    UserPass=mypass
    }}}
==Сборка==
Теперь - самое главное. Свою сборку я собираю WinRAR'ом, исключая из конечного архива файлы _mirandaboot.ini_ и _{{{autoexec_*.ini}}}_, а также ненужные конечному пользователю плагины и папки:
    {{{
    %WINRARDIR%winrar.exe a -sfx -agYYYYMMDD -ep1 -ibck -ed -xPlugins\RemovePersonalSettings.* -xPlugins\svc_dbepp.dll -xPlugins\svc_vi.dll -xmirandaboot.ini -xautoexec_*.ini --x*\Logs\* -r -z%MIRANDAPACKDIR%_res\sfx.txt "%~dp0MirandaVK_.zip" %~dp0..\
    }}}


Таким образом, процесс создания сборки Миранды значительно упрощается.
Посмотреть на мою сборку можно [http://vkontakte.ru/pages.php?o=-6929403&p=%D0%93%D0%BE%D1%82%D0%BE%D0%B2%D0%B0%D1%8F+%D1%81%D0%B1%D0%BE%D1%80%D0%BA%D0%B0 тут].